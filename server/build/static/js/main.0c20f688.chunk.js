(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=a(11),i=a(33),s=a(12),u=a(15),m=a.n(u),p=a(21),f=a(153),d=a(156),g=a(171),v=a(160),h=a(82),E=a(168),b=a(161),O=a(162),j=a(163),w=a(169),y=a(30),C=a.n(y),x={login:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findByUsername:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat("/api/users","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=null,N={setToken:function(e){k="Bearer ".concat(e)},getAll:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:k}},e.next=3,C.a.get("/api/posts",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),post:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,C.a.post("/api/posts",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,C.a.delete("".concat("/api/posts","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=Object(f.a)({container:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"8em"},button:{marginTop:"1em"},grid:{marginTop:"1em"}}),T=function(e){var t=e.setUser,a=Object(n.useState)(""),c=Object(o.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(""),f=Object(o.a)(u,2),y=f[0],C=f[1],k=Object(n.useState)(!1),T=Object(o.a)(k,2),L=T[0],W=T[1],I=Object(s.g)(),D=S(),B=function(){var e=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,x.login({username:l,password:y});case 4:n=e.sent,localStorage.setItem("user",JSON.stringify(n)),N.setToken(n.token),i(""),C(""),t(n),I.push("/"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),W(!0),setTimeout((function(){W(!1)}),3e3);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{maxWidth:"xs"},r.a.createElement(g.a,{open:L,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w.a,{severity:"error",variant:"filled"},"Invalid username or password")),r.a.createElement(v.a,null),r.a.createElement("div",{className:D.container},r.a.createElement(h.a,{component:"h1",variant:"h4"},"Log in"),r.a.createElement("form",{className:D.form,onSubmit:B},r.a.createElement(E.a,{onChange:function(e){var t=e.target;return i(t.value)},label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(E.a,{onChange:function(e){var t=e.target;return C(t.value)},label:"Password",variant:"outlined",type:"password",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(b.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",className:D.button},"Log in"),r.a.createElement(O.a,{container:!0,className:D.grid},r.a.createElement(O.a,{item:!0},r.a.createElement(j.a,{href:"/register"},"Don't have an account? Register"))))))},L=Object(f.a)({container:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"8em"},button:{marginTop:"1em"},grid:{marginTop:"1em"}}),W=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),u=i[0],f=i[1],y=Object(n.useState)(""),C=Object(o.a)(y,2),k=C[0],N=C[1],S=Object(n.useState)(!1),T=Object(o.a)(S,2),W=T[0],I=T[1],D=Object(n.useState)(""),B=Object(o.a)(D,2),R=B[0],A=B[1],z=Object(s.g)(),P=L(),q=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),u!==k){e.next=11;break}return e.next=5,x.register({username:a,password:u});case 5:c(""),f(""),N(""),z.push("/login"),e.next=14;break;case 11:I(!0),A("Passwords must match"),setTimeout((function(){I(!1)}),3e3);case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),I(!0),A("This username is already taken"),setTimeout((function(){I(!1)}),3e3);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{maxWidth:"xs"},r.a.createElement(g.a,{open:W,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w.a,{severity:"error",variant:"filled"},R)),r.a.createElement(v.a,null),r.a.createElement("div",{className:P.container},r.a.createElement(h.a,{component:"h1",variant:"h4"},"Register"),r.a.createElement("form",{onSubmit:q},r.a.createElement(E.a,{onChange:function(e){var t=e.target;return c(t.value)},label:"Username",variant:"outlined",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(E.a,{onChange:function(e){var t=e.target;return f(t.value)},label:"Password",variant:"outlined",type:"password",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(E.a,{onChange:function(e){var t=e.target;return N(t.value)},label:"Confirm password",variant:"outlined",type:"password",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(b.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",className:P.button},"Register"),r.a.createElement(O.a,{container:!0,className:P.grid},r.a.createElement(O.a,{item:!0},r.a.createElement(j.a,{href:"/login"},"Already have an account? Log in"))))))},I=Object(f.a)({container:{height:"100vh",backgroundColor:"#3f51b5"},elementContainer:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white"},buttonContainer:{marginTop:"3em",marginBottom:"5em"},login:{marginRight:"1em"},register:{marginLeft:"1em"},title:{marginTop:"2em"}}),D=function(){var e=Object(s.g)(),t=I();return r.a.createElement("div",{className:t.container},r.a.createElement("div",{className:t.elementContainer},r.a.createElement(v.a,null),r.a.createElement(h.a,{component:"h1",variant:"h2",className:t.title},"Homepage"),r.a.createElement("div",{className:t.buttonContainer},r.a.createElement(b.a,{color:"primary",variant:"contained",onClick:function(){return e.push("/login")},className:t.login},"Log in"),r.a.createElement(b.a,{variant:"contained",onClick:function(){return e.push("/register")},className:t.register},"Register")),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",className:t.image},r.a.createElement("path",{fill:"#3f51b5",fillOpacity:"1",d:"M0,256L48,229.3C96,203,192,149,288,154.7C384,160,480,224,576,218.7C672,213,768,139,864,128C960,117,1056,171,1152,197.3C1248,224,1344,224,1392,224L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"}))))},B=a(172),R=a(164),A=a(165),z=a(159),P=a(77),q=a.n(P),J=Object(f.a)({container:{marginTop:"2em",padding:"1em",border:"solid black"},usernameLink:{fontWeight:"bold"},upper:{display:"flex",justifyContent:"space-between"},image:{margin:"1em 0"},likeContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start"},heart:{padding:"0"}}),U=function(e){var t=e.post,a=e.posts,c=e.setPosts,l=Object(n.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1],m=J(),p=JSON.parse(localStorage.getItem("user"));return r.a.createElement(d.a,{maxWidth:"md",className:m.container},r.a.createElement(v.a,null),r.a.createElement("div",{className:m.upper},r.a.createElement(h.a,{component:"h1",variant:"h6"},r.a.createElement(j.a,{href:"/".concat(t.user.username),color:"inherit"},t.user.username)),t.user.username===p.username?r.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){return u(!0)}},"Delete"):null,r.a.createElement(B.a,{open:s,onClose:function(){return u(!1)}},r.a.createElement(R.a,null,"Are you sure you want to delete this post?"),r.a.createElement(A.a,null,r.a.createElement(b.a,{variant:"contained",onClick:function(){return u(!1)}},"Cancel"),r.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){N.remove(t._id),c(a.filter((function(e){return e!==t}))),u(!1)}},"Delete")))),r.a.createElement("img",{src:t.image,alt:"Post",width:"100%",height:"100%",className:m.image}),r.a.createElement(h.a,{component:"div",className:m.likeContainer},r.a.createElement(z.a,{className:m.heart},r.a.createElement(q.a,null)),r.a.createElement("div",null,t.likes,"\xa0likes")),r.a.createElement(h.a,{component:"div",variant:"body2"},r.a.createElement(j.a,{href:"/".concat(t.user.username),color:"inherit",className:m.usernameLink},t.user.username),"\xa0",t.content),r.a.createElement(h.a,{component:"div",variant:"body2"},"Posted \xa0",t.date))},_=Object(f.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"}}),F=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=_();return Object(n.useEffect)((function(){N.getAll().then((function(e){return c(e.reverse())}))}),[]),r.a.createElement(d.a,{maxWidth:"md",className:l.container},r.a.createElement(v.a,null),a.map((function(e){return r.a.createElement(U,{key:e._id,post:e,posts:a,setPosts:c})})))},M=Object(f.a)({info:{display:"flex",flexDirection:"column",alignItems:"center",borderBottom:"solid black"},followRow:{marginBottom:"1em",display:"flex"},titleRow:{display:"flex",margin:"1em 0"},images:{marginTop:"1em"},username:{marginRight:"0.5em"},button:{marginLeft:"0.5em"},following:{marginLeft:"0.5em"},followers:{margin:"0 0.5em"},posts:{marginRight:"0.5em"}}),V=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=M(),i=Object(s.h)().username;return Object(n.useEffect)((function(){x.findByUsername(i).then((function(e){c(e)}))}),[i]),r.a.createElement("div",null,r.a.createElement(v.a,null),a&&r.a.createElement(d.a,{maxWidth:"md"},r.a.createElement("div",{className:l.info},r.a.createElement("div",{className:l.titleRow},r.a.createElement(h.a,{component:"h1",variant:"h5",className:l.username},a.username),r.a.createElement("div",{className:l.button},r.a.createElement(b.a,{variant:"contained",color:"primary"},"Follow"))),r.a.createElement(h.a,{component:"div",variant:"body1"},r.a.createElement("div",{className:l.followRow},r.a.createElement("div",{className:l.posts},a.posts.length,"\xa0 posts"),r.a.createElement(j.a,{color:"inherit",className:l.followers},a.followers.length,"\xa0 followers"),r.a.createElement(j.a,{color:"inherit",className:l.following},a.following.length,"\xa0 following")))),r.a.createElement("div",{className:l.images},a.posts.map((function(e){return r.a.createElement("img",{src:e.image,alt:"Post",key:e._id,width:"25%",height:"25%"})})))))},H=a(166),Z=a(167),G=a(80),K=a(173),Q=a(78),X=a.n(Q),Y=a(79),$=a.n(Y),ee=Object(f.a)({content:{margin:"1em"},input:{margin:"1em"}}),te=function(e){var t=e.visible,a=e.setVisible,c=Object(n.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(null),m=Object(o.a)(u,2),p=m[0],f=m[1],h=Object(n.useState)(!1),O=Object(o.a)(h,2),j=O[0],y=O[1],C=Object(n.useState)(!1),x=Object(o.a)(C,2),k=x[0],S=x[1],T=ee(),L=function(){a(!1)},W=function(){y(!0),setTimeout((function(){y(!1)}),3e3)};return r.a.createElement(d.a,null,r.a.createElement(g.a,{open:k,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w.a,{severity:"success",variant:"filled"},"Post successfully added")),r.a.createElement(v.a,null),r.a.createElement(B.a,{open:t,onClose:L,fullWidth:!0},r.a.createElement(g.a,{open:j,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w.a,{severity:"error",variant:"filled"},"Content or image missing")),r.a.createElement(R.a,null,"Add a new post"),r.a.createElement("input",{className:T.input,type:"file",onChange:function(e){var t=e.target;return f(t.files[0])}}),r.a.createElement(E.a,{label:"Content",variant:"outlined",required:!0,multiline:!0,onChange:function(e){var t=e.target;return s(t.value)},className:T.content}),r.a.createElement(A.a,null,r.a.createElement(b.a,{variant:"contained",onClick:L},"Cancel"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){try{if(""!==i&&null!==p){var e=new FormData;e.append("content",i),e.append("postImage",p),N.post(e),S(!0),setTimeout((function(){S(!1)}),3e3),s(""),a(!1)}else W()}catch(t){W()}}},"Add post"))))},ae=Object(f.a)({navbar:{display:"flex",justifyContent:"space-between"},postButton:{marginLeft:"5em"}}),ne=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(o.a)(l,2),u=i[0],m=i[1],p=Boolean(a),f=Object(s.g)(),d=ae(),g=JSON.parse(localStorage.getItem("user"));return r.a.createElement(H.a,{position:"sticky"},r.a.createElement(Z.a,{className:d.navbar},r.a.createElement("div",null,r.a.createElement(z.a,{color:"inherit",onClick:function(){return f.push("/")}},r.a.createElement(X.a,null)),r.a.createElement(b.a,{className:d.postButton,onClick:function(){return m(!0)},variant:"contained"},"New post"),r.a.createElement(te,{visible:u,setVisible:m})),r.a.createElement(z.a,{color:"inherit",onClick:function(e){c(e.currentTarget)}},r.a.createElement($.a,null)),r.a.createElement(G.a,{anchorEl:a,onClose:function(){return c(null)},open:p,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(K.a,{onClick:function(){f.push("/".concat(g.username)),c(null)}},"My profile"),r.a.createElement(K.a,{onClick:function(){localStorage.clear(),c(null),f.push("/"),window.location.reload()}},"Log out"))))},re=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("user");if(e){var t=JSON.parse(e);c(t),N.setToken(t.token)}}),[]),r.a.createElement(i.a,null,a?r.a.createElement(ne,null):null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login"},a?r.a.createElement(s.a,{to:"/"}):r.a.createElement(T,{setUser:c})),r.a.createElement(s.b,{path:"/register"},a?r.a.createElement(s.a,{to:"/"}):r.a.createElement(W,null)),r.a.createElement(s.b,{path:"/:username"},r.a.createElement(V,null)),r.a.createElement(s.b,{path:"/"},a?r.a.createElement(F,null):r.a.createElement(D,null))))};l.a.render(r.a.createElement(re,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(120)}},[[91,1,2]]]);
//# sourceMappingURL=main.0c20f688.chunk.js.map